# Процессы внутри контейнера

Давайте создадим и запустим контейнер, зайдем в него, выполним несколько операций и посомтрим на результат.  

<br>

## Создадим контейнер
```bash
docker run -dit --name test_cont busybox:latest
```  
**Разбор команды**:  
- `docker run` - основная команда для создания и запуска контейнера  
- `-d` (detach) - запуск контейнера в фоновом режиме  
- `-i` (interactive) - сохранение STDIN открытым, даже если не подключен  
- `-t` (tty) - выделение псевдо-TTY (терминала для выходных данных)  
- `--name test_cont` - присвоение имени контейнеру "test_cont"  
- `busybox:latest` - используемый образ (минималистичный Linux-образ)    

## Зайдем в контейнер
Для того чтобы попасть внутрь контейнера необходимо использоать команду `exec`:  
```bash
docker exec -i -t test_cont sh
/ # видим прглашение на ввод команд
```
**Разбор команды**:  
- `docker exec` - команда для выполнения команды внутри запущенного контейнера  
- `-i` (interactive) - сохраняет STDIN открытым для ввода  
- `-t` (tty) - выделяет псевдо-терминал  
- `test_cont` - имя целевого контейнера  
- `sh` - команда для выполнения (shell - командная оболочка)  

<br>

Поскольу `busybox` - это минималистичный образ среды Linux, мы можем выполнять команды Linux cli. Например:

```bash
/ # pwd  - определим свое местоположение
/
/ # ls  - взглянем на список файлов и папок
bin    dev    etc    home   lib    lib64  proc   root   sys    tmp    usr    var
/ # mkdir test  - создадим тестовую директорию
/ # ls  - убедимся, что директория создана
bin    dev    etc    home   lib    lib64  proc   root   sys    test   tmp    usr    var
/ # cd test  - перейдем в тестовую директорию
/test # touch test  - создадим в ней файл
/test # echo Hello > test  - запишем в файл строку
/test # cat test  - взглянем на содержимое файла
Hello
```


# Зайдем в контейнер
Теперь зайдем в контейнер чтобы запусть psql  
```shell
docker exec -it postgres psql -U postgres  
```  
где:  
| Атрибут          | Значение |
|-----------------------|----------|
| `docker exec`         | Основная команда для выполнения процесса в работающем контейнере |
| `-iе` или `--interactive` | Поддержка интерактивного режима (позволяет вводить команды) |
| `postgres`           | Имя целевого контейнера (должен быть запущен) |
| `psql`               | Команда для запуска клиента PostgreSQL внутри контейнера |
| `-U postgres`        | Аутентификация под пользователем `postgres` (по умолчанию в PostgreSQL) |

# Проверка psql и выход из контейнера
```shell
postgres=# select 1 + 1; # проверка работы sql
 ?column?
----------
        2
(1 row)

postgres=# \q # команда выхода из контейнера
```

# docker logs
`docker logs` — команда для просмотра логов работающего или остановленного контейнера.  
**Синтаксис**:  
```bash
docker logs [OPTIONS] CONTAINER
```