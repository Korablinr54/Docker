# Драйверы хранилища Docker
Для записи больших объемов данных используются тома Docker, а для небольших
объемов на слое чтения и записи - драйверы хранилища. Драйверы хранилища -
это программное обеспечение для записи данных на слой чтения и записи в контейнере Docker. 

<br>

Узнать текщий драйвер можно командой:
```shell
docker system info
# вывод усечен
Server:
 Containers: 3
  Running: 1
  Paused: 0
  Stopped: 2
 Images: 3
 Server Version: 28.3.3
 Storage Driver: overlayfs # интересующая нас информация
```

# Поддерживаемые драйверы хранилища Docker

## Рекомендуемые:
- **Overlay2** - предпочтительный выбор для всех Linux-дистрибутивов  
  - Наследник оригинального OverlayFS  
  - Поддержка до 128 нижних слоев (против 1 у overlay)  
  - Более эффективная работа с hard links  
  - Не требует дополнительной конфигурации  
  - Поддерживается большинством современных систем  

- **OverlayFS** (overlay) - базовая версия драйвера
  - Работает на основе OverlayFS ядра Linux  
  - Поддержка copy-on-write  
  - Ограничение: только 1 нижний слой
  - Устарел с Docker 18.09, но все еще встречается  

## Альтернативы (специфические случаи):

### Device mapper
- Требует `direct-lvm` (доп. настройка)
- **Loopback-lvm** - низкая производительность, не для production

### Файловые системы
- **Btrfs/ZFS** - если хост использует те же ФС  
- Поддержка сложных операций (снимки и т.д.)  
- Требуют дополнительной конфигурации  

## Устаревшие/нерекомендуемые:
- **Overlay** (оригинальный) - устарел с Docker 18.09  
- **Device mapper** - устарел с Docker 18.09  
- **Vfs** - крайне низкая производительность, нет copy-on-write  
- **Aufs** - только для старых систем (Ubuntu 14.04 + kernel 3.13)  

## Итог: 
- **Используйте `overlay2`** - современная версия OverlayFS с улучшенной производительностью  
- **OverlayFS** (overlay) - рабочий вариант, но с ограничениями по сравнению с overlay2  
